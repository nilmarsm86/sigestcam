{% extends 'content.html.twig' %}

{% block title %}Bienvenido{% endblock %}

{% block javascripts %}
    {{ importmap() }}
{% endblock %}

{% block content %}
    <div class="row">
        <div class="col-8">
            <h3 class="text-dark mb-4">Bienvenido al Sistema de Gestión de Cámaras.</h3>
        </div>
    </div>

    <div class="row">
        <div class="col-md-6 col-xl-3 mb-4">
            <div class="card shadow border-start-primary py-2">
                <div class="card-body">
                    <div class="row align-items-center no-gutters">
                        <div class="col me-2">
                            <div class="text-uppercase text-primary fw-bold text-xs mb-1"><span>Cámaras</span></div>
                            <div class="text-dark fw-bold h5 mb-0"><span>{{ totalCameras }}</span></div>
                        </div>
                        <div class="col-auto"><i class="typcn typcn-video-outline fa-2x text-gray-300"></i></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6 col-xl-3 mb-4">
            <div class="card shadow border-start-success py-2">
                <div class="card-body">
                    <div class="row align-items-center no-gutters">
                        <div class="col me-2">
                            <div class="text-uppercase text-success fw-bold text-xs mb-1"><span>Modems</span></div>
                            <div class="text-dark fw-bold h5 mb-0"><span>{{ totalModems }}</span></div>
                        </div>
                        <div class="col-auto"><i class="fas fa-server fa-2x text-gray-300"></i></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6 col-xl-3 mb-4">
            <div class="card shadow border-start-info py-2">
                <div class="card-body">
                    <div class="row align-items-center no-gutters">
                        <div class="col me-2">
                            <div class="text-uppercase text-success fw-bold text-xs mb-1"><span>Msam</span></div>
                            <div class="text-dark fw-bold h5 mb-0"><span>{{ totalMsam }}</span></div>
                        </div>
                        <div class="col-auto"><i class="fas fa-server fa-2x text-gray-300"></i></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6 col-xl-2 mb-4">
            <div class="card shadow border-start-warning py-2">
                <div class="card-body">
                    <div class="row align-items-center no-gutters">
                        <div class="col me-2">
                            <div class="text-uppercase text-warning fw-bold text-xs mb-1"><span>Servers</span></div>
                            <div class="text-dark fw-bold h5 mb-0"><span>{{ totalServer }}</span></div>
                        </div>
                        <div class="col-auto"><i class="fas fa-server fa-2x text-gray-300"></i></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6 col-xl-1 mb-4">
            <div class="card shadow border-start-warning py-2">
                <div class="card-body">
                    <div class="row align-items-center no-gutters">
                        <div class="col me-2">
                            <div class="text-uppercase text-warning fw-bold text-xs mb-1"><span>Switch</span></div>
                            <div class="text-dark fw-bold h5 mb-0"><span>{{ totalCommutator }}</span></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Start: Chart -->
    <div class="row">
        <div class="col-lg-7 col-xl-8">
            <div class="card shadow mb-4">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h6 class="text-primary fw-bold m-0">
                        <i class="fas fa-clipboard"></i>
                        Reportes {{ 'now'|date('Y') }}
                    </h6>
                    <div class="dropdown no-arrow">
                        <button class="btn btn-link btn-sm dropdown-toggle" aria-expanded="false" data-bs-toggle="dropdown" type="button">
                            <i class="fas fa-ellipsis-v text-gray-400"></i>
                        </button>
                        <div class="dropdown-menu shadow dropdown-menu-end animated--fade-in">
                            <a class="dropdown-item" href="{{ path('report_index') }}">&nbsp;Reportes</a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item" href="{{ path('report_index', {'priority':1}) }}">&nbsp;Reportes prioritarios</a>
                            <a class="dropdown-item" href="{{ path('report_index', {'state':1}) }}">&nbsp;Reportes abiertos</a>
                        </div>
                    </div>
                </div>
                <div class="card-body">
                    <div class="chart-area">
                        <canvas data-bss-chart='{
	"type":"line",
	"data":{
		"labels":["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],
		"datasets":[{
			"label":"Reportes",
			"fill":true,
			"data":["{{ reports[0] }}","{{ reports[1] }}","{{ reports[2] }}","{{ reports[3] }}","{{ reports[4] }}","{{ reports[5] }}","{{ reports[6] }}","{{ reports[7] }}","{{ reports[8] }}","{{ reports[9] }}","{{ reports[10] }}","{{ reports[11] }}"],
			"backgroundColor":"rgba(78, 115, 223, 0.05)",
			"borderColor":"rgba(78, 115, 223, 1)"
		}]
	},
	"options":{
		"maintainAspectRatio":false,
		"legend":{
			"display":false,
			"labels":{
				"fontStyle":"normal"
			}
		},
		"title":{
			"fontStyle":"normal"
		},
		"scales":{
			"xAxes":[{
				"gridLines":{
					"color":"rgb(234, 236, 244)",
					"zeroLineColor":"rgb(234, 236, 244)",
					"drawBorder":false,
					"drawTicks":false,
					"borderDash":["2"],
					"zeroLineBorderDash":["2"],
					"drawOnChartArea":false
				},
				"ticks":{
					"fontColor":"#858796",
					"fontStyle":"normal",
					"padding":20
				}
			}],
			"yAxes":[{
				"gridLines":{
					"color":"rgb(234, 236, 244)",
					"zeroLineColor":"rgb(234, 236, 244)",
					"drawBorder":false,
					"drawTicks":false,
					"borderDash":["2"],
					"zeroLineBorderDash":["2"]
				},
				"ticks":{
					"fontColor":"#858796",
					"fontStyle":"normal",
					"padding":20
				}
			}]
		}
	}
}'></canvas>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-lg-5 col-xl-4">
            <div class="card shadow mb-4">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h6 class="text-primary fw-bold m-0">
                        <i class="fas fa-plug"></i>
                        Conexiones
                    </h6>
                    <div class="dropdown no-arrow">
                        <button class="btn btn-link btn-sm dropdown-toggle" aria-expanded="false" data-bs-toggle="dropdown" type="button">
                            <i class="fas fa-ellipsis-v text-gray-400"></i>
                        </button>
                        <div class="dropdown-menu shadow dropdown-menu-end animated--fade-in">
                            <a class="dropdown-item" href="{{ path('connection_direct_list') }}">&nbsp;Directa</a>
                            <a class="dropdown-item" href="{{ path('connection_simple_list') }}">&nbsp;Simple</a>
                            <a class="dropdown-item" href="{{ path('connection_slave_modem_list') }}">&nbsp;Modem escalvo</a>
                            <a class="dropdown-item" href="{{ path('connection_slave_switch_list') }}">&nbsp;Switch escalvo</a>
                            <a class="dropdown-item" href="#">&nbsp;Completa</a>
                        </div>
                    </div>
                </div>
                <div class="card-body">
                    <div class="chart-area">
                        <canvas data-bss-chart='{
	"type":"doughnut",
	"data":{
		"labels":["Directa","Simple","Switch esclavo","Modem esclavo","Completa"],
		"datasets":[{
			"label":"",
			"backgroundColor":["#4e73df","#1cc88a","#36b9cc","#f6c23e","#e74a3b"],
			"borderColor":["#ffffff","#ffffff","#ffffff","#ffffff","#ffffff"],
			"data":["{{ conections[0] }}", "{{ conections[1] }}", "{{ conections[2] }}", "{{ conections[3] }}", "{{ conections[4] }}"]
		}]
	},
	"options":{
		"maintainAspectRatio":false,
		"legend":{
			"display":true,
			"labels":{
				"fontStyle":"normal"
			}
		},
		"title":{
			"fontStyle":"normal"
		}
	}
}'></canvas>
                    </div>
                </div>
            </div>
        </div>

    </div>
    <!-- End: Chart -->

    <script src="{{ asset('js/chart.min.js') }}"></script>
{% endblock %}
